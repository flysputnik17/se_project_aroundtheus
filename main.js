!function(){"use strict";class t{constructor(t,e,s){let{title:o,link:r}=t;this.title=o,this.link=r,this._cardSelector=e,this._handleImageClick=s}_handleLikeButton(){this._likeButton.classList.toggle("card__description-button_liked")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_setEventListeners(){this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)})),this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton()}))}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._cardTitleEl=this._cardElement.querySelector(".card__description-title"),this._cardImageEl=this._cardElement.querySelector(".card__img"),this._likeButton=this._cardElement.querySelector(".card__description-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardTitleEl.textContent=this.title,this._cardImageEl.src=this.link,this._cardImageEl.alt=this.title,this._setEventListeners(),this._cardElement}}class e{constructor(t,e){this._form=e,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}toggleButtonState(t){this._hasInvalidInput(t)?(this.submitButton.classList.add(this._inactiveButtonClass),this.submitButton.disabled=!0):(this.submitButton.classList.remove(this._inactiveButtonClass),this.submitButton.disabled=!1)}_showInputError(t){const e=this._form.querySelector(`.${t.id}-error`);t.classList.add(this._inputErrorClass),e.classList.add(this._errorClass),e.textContent=t.validationMessage}_hideInputError(t){const e=this._form.querySelector(`.${t.id}-error`);t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this.submitButton=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this.toggleButtonState(t)}))}))}resetValidation(){this._form.reset(),this.toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}class s{constructor(t){this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&this.close(),t.target.classList.contains("modal__close-button")&&this.close()}))}}class o extends s{constructor(t,e){super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=e}close(){this._popupForm.reset(),super.close()}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}setEventListeners(){this._popupForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const r=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__add-button"),i=document.querySelector(".profile-modal"),a=document.forms["profile-form"],l=(document.querySelector(".profile__name"),i.querySelector("#modal__form-name")),c=(document.querySelector(".profile__descripton"),i.querySelector("#modal__form-job")),u=document.querySelector(".card-modal"),d=(u.querySelector("#modal__form-title"),u.querySelector("#modal__form-url"),document.forms["card-form"]),m=(document.querySelectorAll(".modal"),document.querySelector(".cards"),document.querySelector(".image-modal")),_=(m.querySelector(".modal__img-card-img"),m.querySelector(".modal__img-title"),{formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button-inactive",inputErrorClass:"modal__form-input-error",errorClass:"modal__form-error-active"}),h=new e(_,a),p=new e(_,d),E=new o(".profile-modal",(function(t){v.setUserInfo(t.name,t.descripton),E.close()}));E.setEventListeners();const f=new o(".card-modal",(function(t){g.addItem(y(t)),p.resetValidation(),f.close()}));f.setEventListeners();const S=new class extends s{constructor(t){super(t),this._popupImageSrc=this._popupElement.querySelector(".modal__img-card-img"),this._popupTitle=this._popupElement.querySelector(".modal__img-title")}open(t){let{title:e,link:s}=t;this._popupTitle.textContent=e,this._popupImageSrc.src=s,this._popupImageSrc.alt=e,super.open()}}(".image-modal");S.setEventListeners();const g=new class{constructor(t,e){let{items:s,renderer:o}=t;this._items=s,this._renderer=o,this._cardSelector=document.querySelector(e)}renderItems(){this._items.forEach((t=>{let{name:e,link:s}=t;const o={title:e,link:s},r=this._renderer(o);this.addItem(r)}))}addItem(t){this._cardSelector.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:y},".cards"),v=new class{constructor(t,e){this._name=document.querySelector(t),this._job=document.querySelector(e)}getUserInfo(){return{name:this._name.textContent,description:this._job.textContent}}setUserInfo(t,e){this._name.textContent=t,this._job.textContent=e}}(".profile__name",".profile__descripton");function L(t){S.open(t)}function y(e){return new t(e,"#card-template",L).getView()}r.addEventListener("click",(function(){const t=v.getUserInfo();h.resetValidation(),l.value=t.name,c.value=t.description,E.open()})),n.addEventListener("click",(()=>{f.open()})),g.renderItems(),h.enableValidation(),p.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUsaUJBQWtCNUcsR0FDdENzQixTQUNsQixDQWdCQW1FLEVBQVcxRSxpQkFBaUIsU0FBUyxXQUNuQyxNQUFNd0YsRUFBV0MsRUFBU3dCLGNBQzFCNUIsRUFBa0J2QyxrQkFDbEJpQyxFQUFVUixNQUFRaUIsRUFBU2xCLEtBQzNCVSxFQUFTVCxNQUFRaUIsRUFBUzBCLFlBQzFCM0IsRUFBYWpDLE1BQ2YsSUFHQXFCLEVBQVUzRSxpQkFBaUIsU0FBUyxLQUNsQzRGLEVBQWF0QyxNQUFNLElBSXJCd0MsRUFBYVUsY0FFYm5CLEVBQWtCckMsbUJBQ2xCc0MsRUFBcUJ0QyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2Rlc2NyaXB0aW9uLWJ1dHRvbl9saWtlZFwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7IC8vZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBpbWcgdGhheSB3aWxsIG9wZW4gdXBvbiBjbGlja1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vZnVuY3Rpb24gdG8gY2xvbmVpbmcgdGhlIGNhcmQgdGVtcGxldGVcclxuICBfZ2V0RWxlbWVudCgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgLy8vLy8vL2dldFZpZXcgaXMgYSBwdWJsaWMgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgY2FyZCBlbGVtZW50Ly8vLy8vLy8vLy8vLy8vXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpOyAvL2NhbGxpbmcgdGhpcyBmdW5jdGlvbiB0byBjbG9uZSB0aGUgY2FyZCBhbmQgc2F2ZSBpdCBvbiB0aGUgY2FyZEVsZW1lbnRcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVzY3JpcHRpb24tdGl0bGVcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWdcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZGVzY3JpcHRpb24tYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlOyAvL3B1dGluZyB0aGUgdGl0bGUgdG8gdGhlIHRleHQgY29udGVudCBvZiB0aGUgY2FyZCB0aGF0IGkgcmVzaXZpbmdcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMubGluazsgLy9wdXRpbmcgdGhlIGxpbmsgdG8gc3JjIG9mIHRoZSBjYXJkIHRvIHJlbmRlciB0aGUgaW1nXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSB0aGlzLnRpdGxlOyAvL2NvcGluZyB0aGUgdGl0bGUgdG8gcHV0IGl0IGFzIGFuIGFsdCBvZiB0aGUgaW1nXHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy9jYWxsaW5nIHRoZSBldmVudExpc3RlbmVyc1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDsgLy8vcmV0dXJuaW5nIHRoZSBjYXJkIGVsZW1lbnRcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDsgLy9zdG9yaW5nIHRoZSBmb3JtIGVsZW1lbnQgaW5zaWRlIHRoaXMuX2Zvcm1cclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDsgLy9yZXR1cm5pbmcgdHJ1ZSBpZiB0aGVyZSBpcyBhdGxlYXN0IG9uZSBmYWxzZSBhbmQgdGhlbiBieSB0aGUgISBpIHJldHVybmluZyBmYWxzZVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbGVtZW50KSkge1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7IC8vaWYgdGhlIGhhc0ludmFsaWRJbnB1dCByZXR1cm5pbmcgdHJ1ZSB0aGF0IG1lYW5zIHRoYXQgdGhlcmUgaXMgc29tZSBpbnZhbGlkIGlucHV0cyBhbmQgaSBuZWVkIHRvIGRpc2FibGVkIHRoZSBidXR0b25cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7IC8vaWYgdGhlIGhhc0ludmFsaWRJbnB1dCByZXR1cm5pbmcgZmFsc2UgdGhhdCBtZWFzbnMgdGhhdCBhbGwgdGhlIGlucHV0IGZpZWxkcyBhcmUgdmFsaWQgYW5kIGkgbmVlZCB0byBhY3RpdmF0ZSB0aGUgYnV0dHVuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTsgLy9zdG9yaW5nIHRoZSBlcnJvckVsZW1lbnQgYnkgdGhlIGlucHV0IGVsZW1lbnQgaWQgZnJvbSB0aGUgSFRNTFxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTsgLy9hZGQgdGhlIGVycm9yIGNsYXNzIHRvIGl0XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTsgLy9pbnB1dCB0aGUgZ2VuZXJpYyBlcnJvciBtYXNzZWdlXHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLy90aGUgc2VyRXZlbnRMaXN0ZW5lcnMgZnVuY3Rpb24gaXMgdGhlIG1haW4gZnVuY3Rpb24gdGhhdCBsaXN0ZW4gdG8gYWxsIGV2ZW50cyBpbiB0aGUgZm9ybSBpdHMgY3JlYXRpbmcgYSBhcnJheSBmcm9tIGFsbCB0aGUgZm9ybXMgdGhhdCBoYWRlIHRoZSBjbGFzcyBvZiBtb2RhbFxyXG4gIC8vYW5kIHRoZW4gZm9yIGVhY2ggb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBhcnJheSB0aGF0IHdhcyBjcmVhdGVkIGl0IHJ1bmluZyB0aGUgX2NoZWNrSW5wdXRWYWxpZGl0eSBhbmQgdG9nZ2xlQnV0dG9uU3RhdGUgZnVuY3Rpb24gb24gZXZlcnkgaW5wdXQgZXZlbnQgaW4gdGhlIGZvcm1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpOyAvL2l0ZXJhdGluZyBvdmVyIGVhY2ggZWxlbWVudCBvZiB0aGUgYXJycmF5IHRoYXQgaXMgcmVwcmVzZW50aW5nIGFuIGlucHV0IGZpZWxkIGFuZCBjYWxsaW5nIG9uIGV2ZXJ5IG9uZSBvZiB0aGVtIHRoZSBjaGVja0lucHV0VmFsaWRpdHkgZnVuY3Rpb25cclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL3Jlc2V0VmFsaWRhdGlvbiBmdW5jaXRvbiBpcyBhIHB1YmxpYyBmdW5jIHNvIGkgY2FuIGNhbGwgaXQgZnJvbSB0aGUgaW5kZXguanMgdG8gcmVzZXQgdGhlIGlucHV0cyBhbmQgdGhlIHN1Ym1pdCBidXR0b25zXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIC8vb3BlbmluZyB0aGUgcG9wdXAgYnkgYWNjZXB0aW5nIHRoZSBwb3B1cFNlbGVjdG9yXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy9jbG9zaW5nIHRoZSBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAvL2Nsb3NpbmcgdGhlIHBvcHVwIGJ5IHByZXNpbmcgdGhlIEVTQyBidXR0b25cclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vc2V0IGxpc3RlbmVycyBmb3IgcG9wdXAgZm9yIHRoZSBjbG9zZSBidXR0b24gYW5kIG92ZXJseSBvZiB0aGUgcG9wdXAgd2luZG93XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7IC8vc2VsZWN0aW5nIHRoZSBwb3B1cCBmb3JtIGJ5IGl0cyBjbGFzcyBtb2RhbF9mb3JtXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTsgLy9mcm9tIHRoZSBmb3JtIHNlbGVjdGluZyBhbGwgdGhlIGlucHV0c1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7IC8vaXRzIHRoZSBmdW5jdGlvbiBmb3IgdGhlIHN1Ym1pdFxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTsgLy9yZXNldGluZyB0aGUgaW5wdXRzIG9mIHRoZSBwb3B1cCBmb3JtXHJcbiAgICBzdXBlci5jbG9zZSgpOyAvL2NhbGxpbmcgdGhlIGNsb3NlIG1ldGhvZCBvZiB0aGUgUG9wdXAgcGFyZW50IGNsYXNzIHNpbmNlIHRoZSBjbG9zZSBtZXRob2Qgb2YgdGhlIGNoaWxkIG9ubHkgcmVzZXRpbmcgdGhlIGlucHV0cyBhbmQgdGhlIHBhcmVudCBjbG9zZSBtZXRob2QgY2xvc2luZyB0aGUgcG9wdXAgaXRzZWxmXHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9OyAvL2NyZWF0aW5nIGFuIGFiamVjdCB0byBzdG9yZSB0aGUgaW5wdXRzXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTsgLy9pdHJldGluZyBvdmVyIGFsbCB0aGUgaW5wdXRzIGFuZCBzdG9yaW5nIHRoZW0gaW4gdGhlIGlucHV0TGlzdCBvYmplY3RcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vIGhlcmUgeW91IGluc2VydCB0aGUgYHZhbHVlYCBieSB0aGUgYG5hbWVgIG9mIHRoZSBpbnB1dFxyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTsgLy9jYWxsaW5nIHRoZSBzdWJtaXQgZnVuY2l0b24gYW5kIHBhc2luZyBpdCB0aGUgaW5wdXRzIG9iamVjdFxyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy9jYWxsaW5nIHRoZSBwYXJlbnQgc2V0RXZlbnQgbWV0aG9kIHNpbmNlIHRoZSBjaGlsZCBtZXRob2Qgb25seSB3YWl0aW5nIGZvciBhIHN1Ym1pdCBldmVudCBidXQgd2UgbmVlZCBpdCBhbHNvIGJlIGViYWxlIHRvIGxpc3RlbiBmb3IgdGhlXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyB0aGUgbW9kYWwgZWxlbWVudHMgc2VsZWN0aW9ucyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7IC8vdGhlIHByb2ZpbGUgZWRpdCBidXR0b24gc2VsZWN0XHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7IC8vIHRoZSBzZWxlY3Rpb24gb2YgYWRkIGJ1dHRvblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLW1vZGFsXCIpOyAvL3RoZSBtb2RhbCBzZWxlY3RpbmdcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1mb3JtXCJdOyAvL3RoZSBtb2RhbCBmb3JtIHNlbGVjdGluZ1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpOyAvL3RoZSBwcm9maWxlIG5hbWUgZnJvbSB0aGUgcGFnZVxyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2Zvcm0tbmFtZVwiKTsgLy90aGUgcHJvZmlsZSBuYW1lIGlucHV0IGluIG1vZGFsXHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRvblwiKTsgLy90aGUgcHJvZmlsZSBqb2IgZnJvbSB0aGUgcGFnZVxyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9fZm9ybS1qb2JcIik7IC8vdGhlIHByb2ZpbGUgam9iIGlucHV0IGZvcm0gbW9kYWxcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyB0aGUgQWRkIG1vZGFsIGVsZW1lbnRzIHNlbGVjdGlvbnMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmV4cG9ydCBjb25zdCBhZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC1tb2RhbFwiKTsgLy8gdGhlIGFkZCBtb2RhbCBzZWxlY3Rpb25cclxuZXhwb3J0IGNvbnN0IGltZ05hbWUgPSBhZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX19mb3JtLXRpdGxlXCIpOyAvL2ltZyBtb2RhbCBzZWxlY3Rpb25cclxuZXhwb3J0IGNvbnN0IGltZ1VybCA9IGFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWxfX2Zvcm0tdXJsXCIpOyAvL2ltZyB1cmwgZWxlbWVudCBzZWxlY3Rpb25cclxuZXhwb3J0IGNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJjYXJkLWZvcm1cIl07XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy90aGUgbW9kYWxzIGVsZW1lbnQgc2VsZWN0aW9ucy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5leHBvcnQgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gdGhlIGNhcmQgbGlzdCBzZWxlY3Rpb24gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGltZ01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGltZ1NyYyA9IGltZ01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltZy1jYXJkLWltZ1wiKTtcclxuZXhwb3J0IGNvbnN0IGltZ1RpdGxlID0gaW1nTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1nLXRpdGxlXCIpO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3ZhbGlkYXRpb24vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0tYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fZm9ybS1idXR0b24taW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXQtZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19mb3JtLWVycm9yLWFjdGl2ZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRCdXR0b24sXHJcbiAgcHJvZmlsZUZvcm0sXHJcbiAgbmFtZUlucHV0LFxyXG4gIGpvYklucHV0LFxyXG4gIGNhcmRGb3JtLFxyXG4gIGNvbmZpZyxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUZvcm0pOyAvL2NyZWF0aW5nIGEgbmV3IHZhciBmb3IgdGhlIGVkaXQgbW9kYWwgdXNpbmcgdGhlIEZvcm1WYWxpZGF0b3IgY2xhc3NcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRGb3JtKTtcclxuXHJcbmNvbnN0IG5ld0VkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnByb2ZpbGUtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pOyAvL2NyZWF0aW5nIGEgbmV3IHZhciBmb3IgZWRpdCBmb3JtIGZyb20gdGhlIHBvcHVwV2l0aEZvcm0gY2xhc3NcclxubmV3RWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5jYXJkLW1vZGFsXCIsIGFkZENhcmRFbGVtZW50KTtcclxuLy9jcmVhdGluZyBhIG5ldyB2YXIgZm9yIHRoZSBjYXJkIGZvcm0gZnJvbSB0aGUgcG9wdXBXaXRoRnJvbSBjbGFzc1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IG5ld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIuaW1hZ2UtbW9kYWxcIik7XHJcbm5ld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHNlY3Rpb25DYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGNyZWF0ZUNhcmQgfSxcclxuICBcIi5jYXJkc1wiXHJcbik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX19uYW1lXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0b25cIik7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gZnVuY3Rpb25zIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4vL2Z1bmN0aW9uIHRoYXQgb3BlbmluZyB0aGUgaW1nIHBvcHVwXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZCkge1xyXG4gIG5ld0ltYWdlUG9wdXAub3BlbihjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ2FyZEVsZW1lbnQoY2FyZERhdGEpIHtcclxuICBzZWN0aW9uQ2FyZHMuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmREYXRhKSk7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHVzZXJEYXRhKSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuZGVzY3JpcHRvbik7XHJcbiAgbmV3RWRpdFBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFdmVudCBMaXN0ZW5lcnMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gbW9kYWwgZXZlbnRzIC8vLy8vLy8vLy8vLy8vLy8vLy9cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTsgLy9zdG9yaW5nIHRoZSBpbnB1dHMgdGV4dENvbnRlbnQgaW4gdGhlIHVzZXJEYXRhIHZhclxyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcclxuICBuZXdFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vLy8vLy8vLy8vIGFkZCBtb2RhbCBldmVudHMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vIGNhcmRzIGV2ZW50cyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbnNlY3Rpb25DYXJkcy5yZW5kZXJJdGVtcygpO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyAvL2NhbGxpbmcgdGhlIGVuYWJsZVZhbGlkYXRpb24gbWV0aG9kIGZyb20gdGhlIG5ldyBjcmVhdGVkIHZhciB0aGF0IGhhcyB0aGlzIG1ldGhvZCBpbnNpZGUgdGhlIGNsYXNzXHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VTcmMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltZy1jYXJkLWltZ1wiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWctdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgdGl0bGUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZVNyYy5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZVNyYy5hbHQgPSB0aXRsZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoeyBuYW1lLCBsaW5rIH0pID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHtcclxuICAgICAgICB0aXRsZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBuZXdJdGVtID0gdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShuZXdJdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2pvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGl0bGUiLCJsaW5rIiwidGhpcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRJbWFnZUVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJfZ2V0RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybSIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInN1Ym1pdEJ1dHRvbiIsImFkZCIsImRpc2FibGVkIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInJlc2V0VmFsaWRhdGlvbiIsInJlc2V0IiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYWRkTW9kYWwiLCJjYXJkRm9ybSIsImltZ01vZGFsIiwiZm9ybVNlbGVjdG9yIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsIm5ld0VkaXRQb3B1cCIsInVzZXJEYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImRlc2NyaXB0b24iLCJuZXdDYXJkUG9wdXAiLCJjYXJkRGF0YSIsInNlY3Rpb25DYXJkcyIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwibmV3SW1hZ2VQb3B1cCIsIl9wb3B1cEltYWdlU3JjIiwiX3BvcHVwVGl0bGUiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwicmVuZGVySXRlbXMiLCJfcmVmMiIsImVsZW1lbnQiLCJuZXdJdGVtIiwicHJlcGVuZCIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWUiLCJfam9iIiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsImNhcmQiXSwic291cmNlUm9vdCI6IiJ9